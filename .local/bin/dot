#!/bin/sh

PROG="$(basename "$0")"
DIRNAME="$(dirname "$0")"

die() {
    echo
    echo error: "$@"
    exit 1
}

usage() {
    printf 'usage: %s <command>\n' "$PROG"
    printf '\n'
    printf '    git\n'
    printf '    symlink\n'
    printf '    shortcut\n'
    printf '    help\n'
}

config() {
    command git --git-dir="$HOME"/.dotfiles/ --work-tree="$HOME" "$@"
}

[ "$#" -le 0 ] && {
    usage
    exit 1
}

COMMAND="$1"
shift 1

case "$COMMAND" in
    git) config "$@" ;;
    sym*) "$DIRNAME"/dotfiles/symlink.sh ;;
    short*) python3 "$DIRNAME"/dotfiles/shortcut.py ;;
    h*) usage ;;
    *) config "$COMMAND" "$@"
esac
