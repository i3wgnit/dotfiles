\ProvidesPackage{twla}
\RequirePackage{amsmath,amssymb,amsfonts}
%%fakesection Arguments

% Default arguments
\newif\iftwl@maketitle\twl@maketitletrue
\newif\iftwl@crowdmark\twl@crowdmarkfalse
\newif\iftwl@asy\twl@asytrue

% Parse arguments
\DeclareOption{nomaketitle}{\twl@maketitlefalse}
\DeclareOption{noasy}{\twl@asyfalse}

\DeclareOption{crowdmark}{\twl@maketitlefalse\twl@crowdmarktrue}

% Overrides
\DeclareOption{maketitle}{\twl@maketitletrue}
\DeclareOption{asy}{\twl@asytrue}

\ProcessOptions\relax

\RequirePackage{ulem}
\RequirePackage{booktabs}
\RequirePackage{needspace}
\RequirePackage{setspace}
\RequirePackage{etoolbox}
\RequirePackage{array}
\RequirePackage{xfrac}
\RequirePackage{titlesec}
%\RequirePackage{graphicx}
%\RequirePackage{wrapfig}
\PassOptionsToPackage{letterpaper, margin=1.25in, tmargin=1in}{geometry}
\RequirePackage{geometry}
\PassOptionsToPackage{usenames,svgnames,dvipsnames}{xcolor}
\RequirePackage{xcolor}
\RequirePackage{siunitx}
\RequirePackage{physics}


%%fakesection Theorems

%\PassOptionsToPackage{framemethod=TikZ}{mdframed}
\PassOptionsToPackage{thmmarks, amsmath, thref}{ntheorem}
\RequirePackage{framed}
\RequirePackage{mdframed}
\RequirePackage{ntheorem}
%\RequirePackage{thmtools}
%
%\newcommand{\mdfthm}[1]{%
%	\theoremprework{\begin{mdframed}[#1]}%
%	\theorempostwork{\end{mdframed}}%
%}
%
%\newtheoremstyle{bplain}%
%	{\item[\hskip\labelsep \theorem@headerfont ##1\ ##2\theorem@separator]}%
%	{\item[\rlap{\vbox{\hbox{\hskip\labelsep \theorem@headerfont
%	##1\ ##2\ (##3)\theorem@separator}\smallskip{}\hbox{\strut}}}]}

\newtheoremstyle{nonumberbplain}%
{\item[\hskip\labelsep \theorem@headerfont ##1\theorem@separator]}%
{\item[\rlap{\vbox{\hbox{\hskip\labelsep \theorem@headerfont
##1\ (##3)\theorem@separator}\smallskip{}\hbox{\strut}}}]}

%\newtheoremstyle{mybreak}%
%{\item[\rlap{\vbox{\hbox{\hskip\labelsep \theorem@headerfont
%##1\ ##2\theorem@separator}\smallskip{}\hbox{\strut}}}]}%
%{\item[\rlap{\vbox{\hbox{\hskip\labelsep \theorem@headerfont
%##1\ ##2\ (##3)\theorem@separator}\smallskip{}\hbox{\strut}}}]}
%
%\newtheoremstyle{nonumbermybreak}%
%{\item[\rlap{\vbox{\hbox{\hskip\labelsep \theorem@headerfont
%##1\theorem@separator}\smallskip{}\hbox{\strut}}}]}%
%{\item[\rlap{\vbox{\hbox{\hskip\labelsep \theorem@headerfont
%##1\ (##3)\theorem@separator}\smallskip{}\hbox{\strut}}}]}
%
%\newcommand{\thmplain}{%
%	\theoremstyle{bplain}
%	\theoremheaderfont{\bfseries}
%	\theorembodyfont{\normalfont}
%	\theoremseparator{}
%	\theoremprework{}
%	\theorempostwork{}
%	\theoremsymbol{}
%}
%
%\newcommand{\thmpbox}{%
%	\theoremstyle{bplain}
%	\theoremheaderfont{\bfseries}
%	\theorembodyfont{\normalfont}
%	\theoremnumbering{arabic}
%	\theoremseparator{}
%	\mdfthm{}
%	\theoremsymbol{}
%}

\newcommand{\thmproof}{%
	\theoremstyle{nonumberbplain}
	\theoremheaderfont{\itshape}
	\theorembodyfont{\normalfont}
	\theoremseparator{.}
	\theoremprework{}
	\theorempostwork{}
	\theoremsymbol{\ensuremath{_\square}}
}

%\newtheorem{theorem}{Theorem}
%
%\thmplain
%\newtheorem*{note}{Note}
%\newtheorem*{recall}{Recall}
%\renewtheorem{note*}[theorem]{Note}
%\renewtheorem{recall*}[theorem]{Recall}
%
%\newtheorem{remark}[theorem]{Remark}
%\newtheorem{notation}[theorem]{Notation}
%\newtheorem{exercise}[theorem]{Exercise}
%\renewtheorem*{remark*}{Remark}
%\renewtheorem*{notation*}{Notation}
%\renewtheorem*{exercise*}{Exercise}
%
%\newtheorem{lemma}[theorem]{Lemma}
%\newtheorem*{proposition}{Proposition}
%\renewtheorem*{lemma*}{Lemma}
%\renewtheorem{proposition*}[theorem]{Proposition}

\thmproof
\newtheorem{proof}{Proof}

\thmproof
\newtheorem{solution}{Solution}

%\theoremsymbol{\ensuremath{_\blacksquare}}
%\newtheorem{subproof}{Proof}

\theoremstyle{plain}

%%fakesection some commands
\newcommand{\overbar}[1]{\mkern 1.5mu\overline{\mkern-1.5mu#1\mkern-1.5mu}\mkern 1.5mu}
\newcommand{\floor}[1]{\left\lfloor #1 \right\rfloor}
\newcommand{\ceil}[1]{\left\lceil #1 \right\rceil}
%\newcommand{\abs}[1]{\left\lvert #1 \right\rvert}
%\newcommand{\norm}[1]{\left\lVert #1 \right\rVert}
\newcommand{\ii}{\item}
\newcommand{\dg}{^\circ}
\newcommand{\st}{^{\text{st}}}
\newcommand{\nd}{^{\text{nd}}}
%\newcommand{\th}{^{\text{th}}}

\newcommand{\Tau}{\mathcal T} %Tau
\newcommand{\CC}{\mathbb C} %Complex
\newcommand{\RR}{\mathbb R} %Real
\newcommand{\QQ}{\mathbb Q} %Rational
\newcommand{\ZZ}{\mathbb Z} %Interger
\newcommand{\NN}{\mathbb N} %Natural
\newcommand{\FF}{\mathbb F} %Field


%\DeclareMathOperator{\arcsec}{arcsec} %arcsec
\DeclareMathOperator*{\lcm}{lcm} %lcm


\renewcommand{\Re}{\operatorname{Re}}
\renewcommand{\Im}{\operatorname{Im}}

\newcommand{\liff}{\mathbin \leftrightarrow}
\newcommand{\lthen}{\mathbin \rightarrow}
\newcommand{\surjto}{\twoheadrightarrow}
\newcommand{\injto}{\hookrightarrow}
\DeclareMathOperator{\dom}{dom} %domain
\DeclareMathOperator{\img}{img} %image
\DeclareMathOperator{\ran}{ran} %range
\DeclareMathOperator{\Dom}{Dom} %domain
\DeclareMathOperator{\Img}{Img} %image
\DeclareMathOperator{\Ran}{Ran} %range
\DeclareMathOperator{\vspan}{span} %span
\DeclareMathOperator{\vSpan}{Span} %span
\DeclareMathOperator{\rk}{rk} %rank
\DeclareMathOperator{\nul}{nul} %null
\DeclareMathOperator{\Hom}{Hom} %homomorphism
%\DeclareMathOperator{\rank}{rank} %rank
%\DeclareMathOperator{\tr}{tr}
%\DeclareMathOperator{\null}{null} %null
%\DeclareMathOperator{\ker}{ker} %kernel



%%fakesection asymptote
\iftwl@asy
	\RequirePackage[dvips]{attachfile2}
	\RequirePackage{asymptote}
	\begin{asydef}
		settings.prc=false;
		settings.embed=true;
		settings.tex="latex";
		settings.outformat="pdf";

		import olympiad;
		import cse5;
		import drawtree;

		pointpen = black;
		pathpen = black;
		pathfontpen = black;
		anglepen = black;
		anglefontpen = black;
		pointfontsize = 10;
		defaultpen(fontsize(10pt));

		size(5cm);
		treeLevelStep = 1cm;

		usepackage("amsmath");
		usepackage("amssymb");
	\end{asydef}
	\def\asydir{asy}
\fi


%%fakesection custom maketitle
\RequirePackage{titling}
\author{twl}
\date{\today}
\iftwl@maketitle
	\renewcommand{\title}[1]{\def\tw@title{#1}}
	\renewcommand{\date}[1]{\def\tw@date{#1}}
	\renewcommand{\author}[1]{\def\tw@author{#1}}

	\renewcommand{\maketitle}{%
		\begin{center}\textbf{\Large\tw@title}\\[1ex]%
			\tw@date\hfill\tw@author\\[1ex]%
			\hrule%
		\end{center}
	}
\fi


%%fakesection problem environment
\newcounter{probl}
\renewcommand*{\theprobl}{Q\arabic{probl}}

\newcommand{\problem}{%
\stepcounter{probl}{\noindent\Large\textbf{\theprobl}}%
\addcontentsline{toc}{section}{\theprobl}}


\newcounter{probll}[probl]
\renewcommand*{\theprobll}{(\alph{probll})\quad}

\newcommand{\subproblem}{%
\stepcounter{probll}{\noindent\textbf{\theprobll}}%
\addcontentsline{toc}{subsection}{\theprobll}}

\newcounter{problll}[probll]
\renewcommand*{\theproblll}{\roman{problll}.\quad}

\newcommand{\subsubproblem}{%
\stepcounter{problll}{\noindent\textbf{\theproblll}}%
\addcontentsline{toc}{subsubsection}{\theproblll}}

%\newcounter{probll}
%\renewcommand{\theprobll}{\alph{probll})}
%\renewcommand*{\thesection}{P\arabic{section}}
%\renewcommand*{\thesubsection}{(\alph{section})}
%\newcommand{\sectionbreak}{\clearpage}
%\newcommand{\subsectionbreak}{\clearpage}


%\renewcommand{\labelenumi}{(\arabic{enumi})\;}
%
%
%\newcounter{probl}
%\renewcommand{\theprobl}{P\arabic{probl}}
%
%\iftwl@crowdmark
%	\newenvironment{problem}{%
%		\begin{list}
%		{\Large\textbf{\theprobl}\hfill}
%		{\usecounter{probl}%
%			\let\my@olditem\item%
%			\newcommand{\Item}{\pagebreak\my@olditem}%
%			\renewcommand{\ii}{\Item}%
%			\rightmargin=0mm\leftmargin=1em%
%			\labelwidth=2.25em\labelsep=.75em%
%	} }{\end{list}}
%
%	\newenvironment{subproblem}{%
%		\begin{list}
%		{\textbf{\theprobll}\;}
%		{\usecounter{probll}%
%	} }{\end{list}}
%\else
%	\newenvironment{problem}{%
%		\begin{list}
%		{\Large\textbf{\theprobl}\hfill}
%		{\usecounter{probl}%
%			\let\my@olditem\item
%			\newcommand{\Item}{%
%				\filbreak\my@olditem
%			}
%			\renewcommand{\ii}{\Item}
%			\rightmargin=0mm\leftmargin=0em%
%			\labelwidth=2.5em\labelsep=0em\itemsep=8ex%
%	} }{\end{list}}
%
%	\newenvironment{subproblem}{%
%		\begin{list}
%		{\textbf{\theprobll}\;}
%		{\usecounter{probll}%
%			\let\my@olditem\item
%			%\renewcommand{\Item}{%
%			%	%\my@closepage\my@olditem\minipage[t]{\linewidth}%
%			%	%\let\my@closepage\endminipage%
%			%	\filbreak\my@olditem
%			%}
%			%\renewcommand{\ii}{\Item}%
%			\rightmargin=0em\leftmargin=0.5em%
%			\labelwidth=0em\labelsep=0.5em\itemsep=1.5ex%
%	} }{\end{list}\medbreak}
%\fi
